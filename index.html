<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Co-Founders Outreach - Dashboard</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
</head>
<body>
  <!-- Custom title bar for frameless window -->
  <div class="title-bar">
    <div></div>
    <div class="title-bar-controls">
      <div class="title-bar-button minimize" id="minimize-btn"></div>
      <div class="title-bar-button maximize" id="maximize-btn"></div>
      <div class="title-bar-button close" id="close-btn"></div>
    </div>
  </div>

  <!-- Sidebar -->
  <div class="sidebar">
    <div class="logo-container">
      <svg class="logo" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="logo-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#6C5CE7" />
            <stop offset="100%" stop-color="#FF0099" />
          </linearGradient>
        </defs>
        <circle cx="128" cy="128" r="120" fill="#1A1B2E" />
        <path fill="url(#logo-gradient)" d="M128,48 C83.81722,48 48,83.81722 48,128 C48,172.18278 83.81722,208 128,208 C172.18278,208 208,172.18278 208,128 C208,83.81722 172.18278,48 128,48 Z M128,188 C94.86339,188 68,161.13661 68,128 C68,94.86339 94.86339,68 128,68 C161.13661,68 188,94.86339 188,128 C188,161.13661 161.13661,188 128,188 Z" />
        <path fill="url(#logo-gradient)" d="M128,88 C105.90861,88 88,105.90861 88,128 C88,150.09139 105.90861,168 128,168 C150.09139,168 168,150.09139 168,128 C168,105.90861 150.09139,88 128,88 Z" />
        <circle cx="128" cy="128" r="20" fill="#FFFFFF" />
      </svg>
      <span class="logo-text">Co-Founders</span>
    </div>
    
    <div class="nav-menu">
      <div class="nav-item active">
        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
        </svg>
        <span class="nav-text">Dashboard</span>
      </div>
      
      <div class="nav-item">
        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
        </svg>
        <span class="nav-text">Messages</span>
      </div>
      
      <div class="nav-item">
        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
        </svg>
        <span class="nav-text">Compose</span>
      </div>
      
      <div class="nav-item">
        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
        </svg>
        <span class="nav-text">Analytics</span>
      </div>
      
      <div class="nav-item">
        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span class="nav-text">Billing</span>
      </div>
      
      <div class="nav-item">
        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
        <span class="nav-text">Settings</span>
      </div>
    </div>
    
    <div class="user-profile">
      <div class="user-avatar">JD</div>
      <div class="user-info">
        <div class="user-name">John Doe</div>
        <div class="user-role">Admin</div>
      </div>
    </div>
  </div>

  <!-- Main content -->
  <div class="main-content">
    <div class="header">
      <h1 class="page-title">Dashboard</h1>
      
      <div class="header-actions">
        <div class="search-bar">
          <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
          <input type="text" class="search-input" placeholder="Search...">
        </div>
        
        <div class="notification-icon">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
          </svg>
          <div class="notification-badge">3</div>
        </div>
      </div>
    </div>
    
    <!-- Quick stats -->
    <div class="quick-stats">
      <div class="stat-card">
        <div class="stat-icon">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
          </svg>
        </div>
        <div class="stat-info">
          <div class="stat-title">Total Messages</div>
          <div class="stat-value" id="total-messages">304</div>
        </div>
        <div class="stat-badge">+12%</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <div class="stat-info">
          <div class="stat-title">Response Rate</div>
          <div class="stat-value" id="response-rate">51%</div>
        </div>
        <div class="stat-badge">+5%</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <div class="stat-info">
          <div class="stat-title">Time Saved</div>
          <div class="stat-value" id="time-saved">42.5 hrs</div>
        </div>
        <div class="stat-badge" id="money-saved">$2,125</div>
      </div>
    </div>
    
    <!-- Dashboard grid -->
    <div class="dashboard-grid">
      <!-- Donut chart -->
      <div class="chart-container donut-chart">
        <div class="chart-header">
          <div class="chart-title">Response Rate</div>
        </div>
        <div class="chart-content">
          <canvas id="responseRateChart"></canvas>
        </div>
      </div>
      
      <!-- Line chart -->
      <div class="chart-container line-chart">
        <div class="chart-header">
          <div class="chart-title">Message Performance</div>
          <div class="chart-legend">
            <div class="legend-item">
              <div class="legend-color" style="background-color: var(--accent-blue);"></div>
              <span>Sent</span>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background-color: var(--accent-green);"></div>
              <span>Responses</span>
            </div>
          </div>
        </div>
        <div class="chart-content">
          <canvas id="messagePerformanceChart"></canvas>
        </div>
      </div>
      
      <!-- Bar chart -->
      <div class="chart-container bar-chart">
        <div class="chart-header">
          <div class="chart-title">Platform Comparison</div>
        </div>
        <div class="chart-content">
          <canvas id="platformComparisonChart"></canvas>
        </div>
      </div>
      
      <!-- Progress section -->
      <div class="chart-container progress-section">
        <div class="chart-header">
          <div class="chart-title">Performance Metrics</div>
        </div>
        <div class="chart-content">
          <div class="progress-item">
            <div class="progress-header">
              <div class="progress-title">Response Rate</div>
              <div class="progress-value" id="response-rate-progress">55%</div>
            </div>
            <div class="progress-bar">
              <div class="progress-fill purple" id="response-rate-bar" style="width: 55%"></div>
            </div>
          </div>
          
          <div class="progress-item">
            <div class="progress-header">
              <div class="progress-title">Follow-up Effectiveness</div>
              <div class="progress-value" id="followup-rate-progress">76%</div>
            </div>
            <div class="progress-bar">
              <div class="progress-fill pink" id="followup-rate-bar" style="width: 76%"></div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Activity chart -->
      <div class="chart-container activity-chart">
        <div class="chart-header">
          <div class="chart-title">Monthly Activity</div>
        </div>
        <div class="chart-content">
          <canvas id="monthlyActivityChart"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Load scripts -->
  <script src="backend-integration.js"></script>
  <script src="dashboard.js"></script>
  <script>
    // Initialize charts with Chart.js
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        // Initialize backend connection
        await backendIntegration.initialize();
        
        // Get analytics data
        const analyticsData = await backendIntegration.getAnalyticsData();
        
        // Update dashboard with data
        updateDashboardWithData(analyticsData);
        
        console.log('Dashboard initialized with live data');
      } catch (error) {
        console.error('Error initializing dashboard:', error);
        showNotification('Error loading dashboard data. Using offline mode.', 'error');
        
        // Use mock data as fallback
        const mockData = backendIntegration.getMockAnalyticsData();
        updateDashboardWithData(mockData);
      }
    });
    
    // Update dashboard with data
    function updateDashboardWithData(data) {
      // Update stats cards
      document.getElementById('total-messages').textContent = data.messageStats.sent;
      document.getElementById('response-rate').textContent = `${data.messageStats.responseRate}%`;
      document.getElementById('time-saved').textContent = `${data.timeSaved.hours} hrs`;
      document.getElementById('money-saved').textContent = data.timeSaved.moneySaved;
      
      // Update progress bars
      document.getElementById('response-rate-progress').textContent = `${data.messageStats.responseRate}%`;
      document.getElementById('response-rate-bar').style.width = `${data.messageStats.responseRate}%`;
      
      // Initialize charts
      initializeCharts(data);
    }
    
    // Initialize charts with data
    function initializeCharts(data) {
      // Response rate donut chart
      const responseRateCtx = document.getElementById('responseRateChart').getContext('2d');
      new Chart(responseRateCtx, {
        type: 'doughnut',
        data: {
          labels: ['Responses', 'No Response'],
          datasets: [{
            data: [data.messageStats.responseRate, 100 - data.messageStats.responseRate],
            backgroundColor: [
              getComputedStyle(document.documentElement).getPropertyValue('--accent-purple'),
              getComputedStyle(document.documentElement).getPropertyValue('--bg-secondary')
            ],
            borderWidth: 0,
            cutout: '70%'
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              callbacks: {
                label: function(context) {
                  return `${context.label}: ${context.raw}%`;
                }
              }
            }
          }
        }
      });
      
      // Message performance line chart
      const messagePerformanceCtx = document.getElementById('messagePerformanceChart').getContext('2d');
      new Chart(messagePerformanceCtx, {
        type: 'line',
        data: {
          labels: data.monthlyData.labels,
          datasets: [
            {
              label: 'Sent',
              data: data.monthlyData.sent,
              borderColor: getComputedStyle(document.documentElement).getPropertyValue('--accent-blue'),
              backgroundColor: 'rgba(58, 134, 255, 0.1)',
              tension: 0.4,
              fill: true
            },
            {
              label: 'Responses',
              data: data.monthlyData.responses,
              borderColor: getComputedStyle(document.documentElement).getPropertyValue('--accent-green'),
              backgroundColor: 'rgba(0, 214, 143, 0.1)',
              tension: 0.4,
              fill: true
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                color: 'rgba(255, 255, 255, 0.05)'
              },
              ticks: {
                color: 'rgba(255, 255, 255, 0.7)'
              }
            },
            x: {
              grid: {
                display: false
              },
              ticks: {
                color: 'rgba(255, 255, 255, 0.7)'
              }
            }
          },
          plugins: {
            legend: {
              display: false
            }
          }
        }
      });
      
      // Platform comparison bar chart
      const platformComparisonCtx = document.getElementById('platformComparisonChart').getContext('2d');
      new Chart(platformComparisonCtx, {
        type: 'bar',
        data: {
          labels: data.platformPerformance.map(p => p.platform),
          datasets: [
            {
              label: 'Sent',
              data: data.platformPerformance.map(p => p.sent),
              backgroundColor: getComputedStyle(document.documentElement).getPropertyValue('--accent-purple'),
              barPercentage: 0.6,
              categoryPercentage: 0.7
            },
            {
              label: 'Responses',
              data: data.platformPerformance.map(p => p.responses),
              backgroundColor: getComputedStyle(document.documentElement).getPropertyValue('--accent-pink'),
              barPercentage: 0.6,
              categoryPercentage: 0.7
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                color: 'rgba(255, 255, 255, 0.05)'
              },
              ticks: {
                color: 'rgba(255, 255, 255, 0.7)'
              }
            },
            x: {
              grid: {
                display: false
              },
              ticks: {
                color: 'rgba(255, 255, 255, 0.7)'
              }
            }
          },
          plugins: {
            legend: {
              position: 'top',
              labels: {
                color: 'rgba(255, 255, 255, 0.7)',
                boxWidth: 12,
                padding: 15
              }
            }
          }
        }
      });
      
      // Monthly activity chart
      const monthlyActivityCtx = document.getElementById('monthlyActivityChart').getContext('2d');
      new Chart(monthlyActivityCtx, {
        type: 'line',
        data: {
          labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
          datasets: [
            {
              label: 'Activity',
              data: [30, 45, 60, 70, 65, 80, 95, 85, 90, 100, 110, 120],
              borderColor: getComputedStyle(document.documentElement).getPropertyValue('--accent-pink'),
              backgroundColor: 'rgba(255, 0, 153, 0.1)',
              tension: 0.4,
              fill: true
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                color: 'rgba(255, 255, 255, 0.05)'
              },
              ticks: {
                color: 'rgba(255, 255, 255, 0.7)'
              }
            },
            x: {
              grid: {
                display: false
              },
              ticks: {
                color: 'rgba(255, 255, 255, 0.7)'
              }
            }
          },
          plugins: {
            legend: {
              display: false
            }
          }
        }
      });
    }
    
    // Show notification to user
    function showNotification(message, type = 'info') {
      // Create notification element
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      notification.textContent = message;
      
      // Add to document
      document.body.appendChild(notification);
      
      // Position it
      notification.style.position = 'fixed';
      notification.style.bottom = '20px';
      notification.style.right = '20px';
      notification.style.padding = '12px 20px';
      notification.style.borderRadius = '8px';
      notification.style.backgroundColor = type === 'error' ? '#ff6b6b' : 
                                          type === 'success' ? '#00d68f' : '#3a86ff';
      notification.style.color = 'white';
      notification.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.15)';
      notification.style.zIndex = '1000';
      notification.style.transition = 'all 0.3s ease';
      notification.style.opacity = '0';
      
      // Animate in
      setTimeout(() => {
        notification.style.opacity = '1';
      }, 10);
      
      // Remove after delay
      setTimeout(() => {
        notification.style.opacity = '0';
        setTimeout(() => {
          document.body.removeChild(notification);
        }, 300);
      }, 3000);
    }
  </script>
</body>
</html>
